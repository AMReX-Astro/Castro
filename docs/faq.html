

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Frequently Asked Questions &mdash; Castro  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"TeX": {"Macros": {"kth": "{{k_\\mathrm{th}}}", "gcc": "{\\mathrm{g~cm^{-3}}}", "cms": "{\\mathrm{cm~s^{-1}}}", "presunit": "{\\mathrm{dyn~cm^{-2}}}", "accelunit": "{\\mathrm{cm~s^{-2}}}", "ergg": "{\\mathrm{erg~g^{-1}}}", "Ab": "{{\\bf A}}", "eb": "{{\\bf e}}", "Fb": "{{\\bf F}}", "gb": "{{\\bf g}}", "Hb": "{{\\bf H}}", "ib": "{{\\bf i}}", "Ib": "{{\\bf I}}", "Kb": "{{\\bf K}}", "lb": "{{\\bf l}}", "Lb": "{{\\bf L}}", "nb": "{{\\bf n}}", "Pb": "{{\\bf P}}", "Qb": "{{\\bf Q}}", "rb": "{{\\bf r}}", "Rb": "{{\\bf R}}", "Sb": "{{\\bf S}}", "ub": "{{\\bf u}}", "Ub": "{{\\bf U}}", "xb": "{{\\bf x}}", "dt": "{\\Delta t}", "omegadot": "{\\dot\\omega}", "inp": "{{\\rm in}}", "outp": "{{\\rm out}}", "sync": "{{\\rm sync}}", "half": "{\\frac{1}{2}}", "myhalf": "{\\half}", "nph": "{{n+\\myhalf}}", "kpp": "{\\ensuremath{\\kappa_{\\mathrm{P}}}}", "kpr": "{\\ensuremath{\\kappa_{\\mathrm{R}}}}", "kpf": "{\\ensuremath{\\kappa_{\\mathrm{F}}}}", "vb": "{\\boldsymbol{v}}", "vbt": "{\\widetilde{\\vb}}", "rbt": "{\\widetilde{\\rb}}", "ob": "{\\boldsymbol{\\omega}}", "nablab": "{\\boldsymbol{\\nabla}}", "avg": ["{{\\left \\langle #1 \\right \\rangle}}", 1]}}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Build System Overview" href="build_system.html" />
    <link rel="prev" title="Visualization" href="visualization.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Castro
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Castro basics</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Preface.html">Preface</a></li>
<li class="toctree-l1"><a class="reference internal" href="Introduction.html">Introduction to Castro</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="rp_intro.html">Runtime Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="mpi_plus_x.html">Running Options: CPUs and GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="FlowChart.html">Flowchart</a></li>
<li class="toctree-l1"><a class="reference internal" href="software.html">Software Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="timestepping.html">Timestepping and Retries</a></li>
<li class="toctree-l1"><a class="reference internal" href="creating_a_problem.html">Setting Up Your Own Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="io.html">Outputting</a></li>
<li class="toctree-l1"><a class="reference internal" href="regridding.html">Regridding</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Frequently Asked Questions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#compiling">Compiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#debugging">Debugging</a></li>
<li class="toctree-l2"><a class="reference internal" href="#profiling">Profiling</a></li>
<li class="toctree-l2"><a class="reference internal" href="#managing-runs">Managing Runs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#runtime-errors">Runtime Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="#visualization">Visualization</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Castro reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="build_system.html">Build System Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="coding_conventions.html">Coding Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="debugging.html">Debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu_porting.html">Offloading a routine to GPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hydrodynamics.html">Hydrodynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="gravity.html">Gravity</a></li>
<li class="toctree-l1"><a class="reference internal" href="diffusion.html">Diffusion</a></li>
<li class="toctree-l1"><a class="reference internal" href="rotation.html">Rotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="sponge.html">Sponge</a></li>
<li class="toctree-l1"><a class="reference internal" href="radiation.html">Radiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="Particles.html">Tracer particles</a></li>
<li class="toctree-l1"><a class="reference internal" href="EOSNetwork.html">Microphysics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sdc.html">Spectral Deferred Corrections</a></li>
<li class="toctree-l1"><a class="reference internal" href="AMR.html">Adaptive Mesh Refinement</a></li>
<li class="toctree-l1"><a class="reference internal" href="ConvertCheckpoint.html">Checkpoint Embiggener</a></li>
<li class="toctree-l1"><a class="reference internal" href="self_consistent_field.html">Self-Consistent Field Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAESTRO_restart.html">Restarting from Maestro</a></li>
<li class="toctree-l1"><a class="reference internal" href="Verification.html">Verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html#castro-releases">Castro Releases</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="filelist.html">File list</a></li>
<li class="toctree-l1"><a class="reference internal" href="classlist.html">Class list</a></li>
</ul>
<p class="caption"><span class="caption-text">References</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="zreferences.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Castro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Frequently Asked Questions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/faq.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="frequently-asked-questions">
<h1>Frequently Asked Questions<a class="headerlink" href="#frequently-asked-questions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="compiling">
<h2>Compiling<a class="headerlink" href="#compiling" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>Compiling fails giving me a cryptic message about a module not
being found, usually bl_types or bl_error_module, like:</em></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mpif90</span> <span class="o">-</span><span class="n">fno</span><span class="o">-</span><span class="nb">range</span><span class="o">-</span><span class="n">check</span> <span class="o">-</span><span class="n">fno</span><span class="o">-</span><span class="n">second</span><span class="o">-</span><span class="n">underscore</span>
 <span class="o">-</span><span class="n">Jo</span><span class="o">/</span><span class="mi">3</span><span class="n">d</span><span class="o">.</span><span class="n">Linux</span><span class="o">.</span><span class="n">gcc</span><span class="o">.</span><span class="n">gfortran</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">EXE</span> <span class="o">-</span><span class="n">I</span> <span class="n">o</span><span class="o">/</span><span class="mi">3</span><span class="n">d</span><span class="o">.</span><span class="n">Linux</span><span class="o">.</span><span class="n">gcc</span><span class="o">.</span><span class="n">gfortran</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">EXE</span>
 <span class="o">-</span><span class="n">ffixed</span><span class="o">-</span><span class="n">line</span><span class="o">-</span><span class="n">length</span><span class="o">-</span><span class="mi">0</span> <span class="o">-</span><span class="n">g</span> <span class="o">-</span><span class="n">O3</span>
 <span class="o">-</span><span class="n">I</span><span class="o">.</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">util</span>
 <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">EOS</span> <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">EOS</span><span class="o">/</span><span class="n">gamma_law</span>
 <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">networks</span>
 <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">networks</span><span class="o">/</span><span class="n">general_null</span>
 <span class="o">-</span><span class="n">I</span><span class="o">.</span> <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Src</span><span class="o">/</span><span class="n">C_BaseLib</span>
 <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Src</span><span class="o">/</span><span class="n">C_AMRLib</span>
 <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Src</span><span class="o">/</span><span class="n">C_BoundaryLib</span> <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Source</span>
 <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Source</span><span class="o">/</span><span class="n">Src_3d</span> <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">Source</span><span class="o">/</span><span class="n">Src_nd</span> <span class="o">-</span><span class="n">I</span><span class="o">../../</span><span class="n">constants</span>
 <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Src</span><span class="o">/</span><span class="n">F_BaseLib</span>
 <span class="o">-</span><span class="n">I</span><span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Tools</span><span class="o">/</span><span class="n">C_scripts</span> <span class="o">-</span><span class="n">c</span>
 <span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">EOS</span><span class="o">/</span><span class="n">eos</span><span class="o">.</span><span class="n">f90</span> <span class="o">-</span><span class="n">o</span>
 <span class="n">o</span><span class="o">/</span><span class="mi">3</span><span class="n">d</span><span class="o">.</span><span class="n">Linux</span><span class="o">.</span><span class="n">gcc</span><span class="o">.</span><span class="n">gfortran</span><span class="o">.</span><span class="n">MPI</span><span class="o">.</span><span class="n">EXE</span><span class="o">/</span><span class="n">eos</span><span class="o">.</span><span class="n">o</span>
<span class="o">../../</span><span class="n">Microphysics</span><span class="o">/</span><span class="n">EOS</span><span class="o">/</span><span class="n">eos</span><span class="o">.</span><span class="n">f90</span><span class="p">:</span><span class="mi">3</span><span class="p">:</span><span class="mi">6</span><span class="p">:</span>

   <span class="n">use</span> <span class="n">bl_types</span>
      <span class="mi">1</span>
<span class="n">Fatal</span> <span class="n">Error</span><span class="p">:</span> <span class="n">Can</span><span class="s1">&#39;t open module file ‘bl_types.mod’ for reading at (1):</span>
 <span class="n">No</span> <span class="n">such</span> <span class="n">file</span> <span class="ow">or</span> <span class="n">directory</span> <span class="n">compilation</span> <span class="n">terminated</span><span class="o">.</span>

<span class="o">/</span><span class="n">home</span><span class="o">/</span><span class="n">zingale</span><span class="o">/</span><span class="n">development</span><span class="o">/</span><span class="n">BoxLib</span><span class="o">//</span><span class="n">Tools</span><span class="o">/</span><span class="n">C_mk</span><span class="o">/</span><span class="n">Make</span><span class="o">.</span><span class="n">rules</span><span class="p">:</span><span class="mi">122</span><span class="p">:</span> <span class="n">recipe</span>
 <span class="k">for</span> <span class="n">target</span> <span class="s1">&#39;o/3d.Linux.gcc.gfortran.MPI.EXE/eos.o&#39;</span> <span class="n">failed</span>
</pre></div>
</div>
<p>This usually indicates that the build system cannot find a source file
(note: the problem above is not bl_types, that just seems to be
the way the error manifests itself). The source files are specified
in the various Make.package files throughout the
Castro&nbsp;directory hierarchy. make will look through the
directories in the VPATH_LOCATIONS to find the files.</p>
<p>There are 2 things you can do to check what’s happening. First, inspect
the directories in VPATH_LOCATIONS. This can be done via:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="nb">print</span><span class="o">-</span><span class="n">VPATH_LOCATIONS</span>
</pre></div>
</div>
<p>Next, ask make to tell you where it is finding each of the source
files. This is done through a script find_files_vpath.py
that is hooked into Castro’s build system. You can run this as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">file_locations</span>
</pre></div>
</div>
<p>At the end of the report, it will list any files it cannot find in
the vpath. Some of these are to be expected (like extern.f90
and buildInfo.cpp—these are written at compiletime. But any
other missing files need to be investigated.</p>
</li>
<li><p class="first"><em>I’m still having trouble compiling. How can I find out what
all of the make variables are set to?</em></p>
<p>Use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">help</span>
</pre></div>
</div>
<p>This will tell you the value of all the compilers and their options.</p>
</li>
<li><p class="first"><em>How do I use a system’s BLAS library instead of compiling and
linking the one that comes with the StarKiller&nbsp;microphysics?</em></p>
<p>To use a system’s BLAS library, set the Make variable
USE_SYSTEM_BLAS to TRUE. This will then look at
the Make variable BLAS_LIBRARY for the library to link
(defaults to -lopenblas).</p>
</li>
<li><p class="first"><em>How can I check to make sure the function signatures defined
in C&nbsp;are consistent with their implementations in Fortran?</em></p>
<p>Use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">typecheck</span>
</pre></div>
</div>
<p>This will compile the code and report on any mismatched function signatures.</p>
</li>
</ol>
</div>
<div class="section" id="debugging">
<h2>Debugging<a class="headerlink" href="#debugging" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>Castro&nbsp;crashes with a floating point exception—how can
I get more information?</em></p>
<p>The best thing to do is to recompile the code with TEST=TRUE
set in the GNUmakefile. This will have AMReX&nbsp;catch the
signals raised in both C&nbsp;and Fortran functions. Behind the
scenes, this defines the AMREX_TESTING preprocessor flag, which
will initialize memory allocated in fabs or multifabs to
signaling NaNs (sNaN), and use the BLBackTrace::handler()
function to handle various signals raised in both C&nbsp;and Fortran
functions. This is a Linux/UNIX capability. This gives us a chance
to print out backtrace information. The signals include seg fault,
floating point exceptions (NaNs, divided by zero and overflow), and
interruption by the user and system. What signals are handed to
AMReX&nbsp;are controlled by AMReX(e.g., using interruption by the
user, this was once used to find an MPI deadlock.) It also includes
the BL_ASSERTION statements if USE_ASSERTION=TRUE or
DEBUG=TRUE.</p>
<p>The AMReX&nbsp;parameters that affect the behavior are:</p>
<ul class="simple">
<li>amrex.fpe_trap_invalid</li>
<li>amrex.fpe_trap_zero</li>
<li>amrex.fpe_trap_overflow</li>
</ul>
<p>For further capabilities, defining BACKTRACE=TRUE enables you
to get more information than the backtrace of the call stack info by
instrumenting the code. (This is in C&nbsp;code only). Here is an
example. You know the line “Real rho = state(cell,0);” is
causing a segfault. You could add a print statement before that.
But it might print out thousands (or even millions) of line before
it hits the segfault. With BACKTRACE, you could do</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>#ifdef AMREX_BACKTRACING
   std::ostringstream ss;
   ss &lt;&lt; ``state.box() = `` &lt;&lt; state.box() &lt;&lt; `` cell = `` &lt;&lt; cell;
   BL_BACKTRACE_PUSH(ss.str()); // PUSH takes std::string
#endif

Real rho = state(cell,0);  // state is a Fab, and cell is an IntVect.
</pre></div>
</div>
<p>The “print” prints to a stack of string, not stdout. When it
hits the segfault, you will only see the last print out.</p>
</li>
<li><p class="first"><em>How can I monitor the state in a zone from the C&nbsp;side
at various points in the evolution?</em></p>
<p>Given a MultiFab&nbsp;mf, you can dump out the state as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">print_state</span><span class="p">(</span><span class="n">mf</span><span class="p">,</span> <span class="n">IntVect</span><span class="p">(</span><span class="n">D_DECL</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">30</span><span class="p">)));</span>
</pre></div>
</div>
<p>Here, the IntVect has the dimension that we were compiled with
(and this is handled through the preprocessor D_DECL). In
this case, we are inspecting zone (10, 20, 30), in the global index
space. Note that since a multifab exists only on a single level, the
integer indices here refer to the global index space on that level.</p>
</li>
<li><p class="first"><em>What if I want to see all the data in a FArrayBox?</em></p>
<p>You can simply output a FAB to std::cout. Imagine that you
are in an MFIter&nbsp;loop, with a MultiFab&nbsp;mf:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">S</span> <span class="o">=</span> <span class="n">FArrayBox</span><span class="o">&amp;</span> <span class="n">mf</span><span class="p">[</span><span class="n">mfi</span><span class="p">];</span>
<span class="n">std</span><span class="p">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">S</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="p">::</span><span class="n">endl</span><span class="p">;</span>
</pre></div>
</div>
<p>This will output the contents on the FAB, one zone per line.</p>
</li>
</ol>
</div>
<div class="section" id="profiling">
<h2>Profiling<a class="headerlink" href="#profiling" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>How can I get line-by-line profiling information?</em></p>
<p>With the GNU compliers, you can enabling profiling with gprof
by compiling with</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">USE_GPROF</span><span class="o">=</span><span class="n">TRUE</span>
</pre></div>
</div>
<p>in your GNUmakefile.</p>
<p>When you run, a file named gmon.out will be produced. This can
be processed with gprof by running:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">gprof</span> <span class="n">exec</span><span class="o">-</span><span class="n">name</span>
</pre></div>
</div>
<p>where <em>exec-name</em> is the name of the executable. More detailed
line-by-line information can be obtained by passing the -l
argument to gprof.</p>
</li>
</ol>
</div>
<div class="section" id="managing-runs">
<h2>Managing Runs<a class="headerlink" href="#managing-runs" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>How can I force the running code to output, even it the plot or
checkpoint interval parameters don’t require it?</em></p>
<p>Create a file called dump_and_continue, e.g., as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">touch</span> <span class="n">dump_and_continue</span>
</pre></div>
</div>
<p>This will force the code to output a checkpoint file that can be used
to restart. Other options are plot_and_continue to output
a plotfile, dump_and_stop to output a checkpoint file
and halt the code, and stop_run to simply stop the code.
Note that the parameter amr.message_int controls how often
the existence of these files is checked; by default it is 10, so the
check will be done at the end of every timestep that is a multiple of 10.
Set that to 1 in your inputs file if you’d like it to check every timestep.</p>
</li>
<li><p class="first"><em>How can I output plotfiles in single precision?</em></p>
<p>The AMReX&nbsp;runtime parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fab</span><span class="o">.</span><span class="n">format</span> <span class="o">=</span> <span class="n">NATIVE_32</span>
</pre></div>
</div>
<p>controls this (put this in your inputs file). Note: checkpoint files are unaffected
by this and will always be written out in the native precision (the ‘fab.format‘ parameter
is overridden in the checkpoint code in AMReX).</p>
</li>
<li><p class="first"><em>How can I check the compilation parameters of a Castro executable?</em></p>
<p>The build information (including git hashes, modules, EoS, network, etc.) can be displayed by running the executable as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">./</span><span class="n">Castro</span><span class="o">.</span><span class="n">exe</span> <span class="o">--</span><span class="n">display</span>
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="runtime-errors">
<span id="ch-faq-vis"></span><h2>Runtime Errors<a class="headerlink" href="#runtime-errors" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>When running with retries, Castro requests too many substeps
and crashes.</em></p>
<p>This can occur due to CFL violations or negative densities.  If
there are density resets, try running with
<code class="docutils literal notranslate"><span class="pre">castro.limit_fluxes_on_small_dens</span></code> = 1.  This will use a flux
limiter to prevent the density from going negative.</p>
</li>
</ol>
</div>
<div class="section" id="visualization">
<h2>Visualization<a class="headerlink" href="#visualization" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first"><em>When I try to use Amrvis&nbsp;with the Nvidia driver, all I see is
black—no data. How do I fix this?</em></p>
<p>You need to edit your xorg.conf file (usually found in /etc/X11/
to enable the Dac8Bit option. The section will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Section</span> <span class="s2">&quot;Device&quot;</span>
    <span class="n">Identifier</span>     <span class="s2">&quot;Device0&quot;</span>
    <span class="n">Driver</span>         <span class="s2">&quot;nvidia&quot;</span>
    <span class="n">VendorName</span>     <span class="s2">&quot;NVIDIA Corporation&quot;</span>
    <span class="n">Option</span>         <span class="s2">&quot;Dac8bit&quot;</span> <span class="s2">&quot;True&quot;</span>
<span class="n">EndSection</span>
</pre></div>
</div>
<p>If you don’t already have an xorg.conf then you can create one
by running nvidia-xconfig first.</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="build_system.html" class="btn btn-neutral float-right" title="Build System Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="visualization.html" class="btn btn-neutral float-left" title="Visualization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Castro development tem

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>