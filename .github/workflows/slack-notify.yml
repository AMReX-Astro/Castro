on: 
  pull_request:
    types: synchronize
name: Slack Notification 
jobs:
  slackNotification:
    name: Slack Notification
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: get commit message
      run: |
        echo ::set-env name=COMMIT_MSG::$(git log --format=%B -n 1 ${{ github.event.after }})

    - name: Slack Notification 
      uses: AMReX-Astro/slack-action@master
      with: 
        slack_webhook: ${{ secrets.SLACK_WEBHOOK }}
        slack_channel: castro
        message: ${{ env.COMMIT_MSG }}